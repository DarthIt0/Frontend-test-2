{"ast":null,"code":"import _defineProperty from\"/home/quasar-dev/Downloads/frontend-test-luine/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/quasar-dev/Downloads/frontend-test-luine/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/quasar-dev/Downloads/frontend-test-luine/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Form,FormGroup,Label,Input,Col,Table}from'reactstrap';import{Button,Message}from'semantic-ui-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Step3=function Step3(props){var category=props.category,people=props.people,setPage=props.setPage,place=props.place,selectedDishes=props.selectedDishes,setSelectedDishes=props.setSelectedDishes,options=props.options;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var filteredOptions=options.filter(function(option){return option.availableMeals.includes(category);}).filter(function(option){return option.restaurant===place;}).map(function(option){return option.name;});var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),selectedDish=_useState4[0],setSelectedDish=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),selectedQuantity=_useState6[0],setSelectedQuantity=_useState6[1];var handleAddDish=function handleAddDish(){if(!selectedDish||!selectedQuantity){return;}var updatedDishes=_objectSpread(_objectSpread({},selectedDishes),{},_defineProperty({},selectedDish,selectedDish in selectedDishes?selectedDishes[selectedDish]+selectedQuantity:selectedQuantity));setSelectedDishes(updatedDishes);setSelectedDish('');setSelectedQuantity(0);};var handleRemoveDish=function handleRemoveDish(dish){var updatedDishes=_objectSpread({},selectedDishes);delete updatedDishes[dish];setSelectedDishes(updatedDishes);};var handleClickNext=function handleClickNext(){var sum=0;for(var _i=0,_Object$values=Object.values(selectedDishes);_i<_Object$values.length;_i++){var quantity=_Object$values[_i];sum+=quantity;}if(sum>=people&&sum<11){setError(null);setPage(4);}else{setError('The total quantity should be greater or equal to the number of people (maximum of 10)');}};var handleClickOne=function handleClickOne(){setError(null);setPage(1);};var handleClickTwo=function handleClickTwo(){setError(null);setPage(2);};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\" \"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(Button,{onClick:handleClickOne,children:\"STEP 1\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClickTwo,children:\"STEP 2\"}),/*#__PURE__*/_jsx(Button,{disabled:true,style:{color:\"blue\"},children:\"STEP 3\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClickNext,children:\"REVIEW\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\" \"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Step 3\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choose dishes and their quantities:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"(The total being greater or equal to \",people,\" and less than 11)\"]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(FormGroup,{row:true,children:[/*#__PURE__*/_jsx(Label,{for:\"dish\",sm:2,children:\"Dish\"}),/*#__PURE__*/_jsx(Col,{sm:10,children:/*#__PURE__*/_jsxs(Input,{type:\"select\",name:\"dish\",id:\"dish\",value:selectedDish,onChange:function onChange(e){return setSelectedDish(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select a dish\"}),filteredOptions.map(function(dish){return/*#__PURE__*/_jsx(\"option\",{value:dish,children:dish},dish);})]})})]}),/*#__PURE__*/_jsxs(FormGroup,{row:true,children:[/*#__PURE__*/_jsx(Label,{for:\"quantity\",sm:2,children:\"Quantity\"}),/*#__PURE__*/_jsx(Col,{sm:10,children:/*#__PURE__*/_jsx(Input,{type:\"number\",name:\"quantity\",id:\"quantity\",min:\"1\",max:\"10\",value:selectedQuantity,onChange:function onChange(e){return setSelectedQuantity(parseInt(e.target.value));}})})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddDish,children:\"Add dish\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Dish\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(selectedDishes).map(function(_ref){var _ref2=_slicedToArray(_ref,2),dish=_ref2[0],quantity=_ref2[1];return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:dish}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:quantity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleRemoveDish(dish);},children:\"Remove\"})})]},dish);})})]}),/*#__PURE__*/_jsx(\"h1\",{children:\" \"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClickTwo,children:\"Previous\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClickNext,children:\"Next\"}),error&&/*#__PURE__*/_jsx(Message,{error:true,header:\"Error\",content:error,style:{marginTop:'1rem'}})]});};export default Step3;","map":{"version":3,"names":["React","useState","Form","FormGroup","Label","Input","Col","Table","Button","Message","Step3","props","category","people","setPage","place","selectedDishes","setSelectedDishes","options","error","setError","filteredOptions","filter","option","availableMeals","includes","restaurant","map","name","selectedDish","setSelectedDish","selectedQuantity","setSelectedQuantity","handleAddDish","updatedDishes","handleRemoveDish","dish","handleClickNext","sum","Object","values","quantity","handleClickOne","handleClickTwo","display","flexDirection","alignItems","color","e","target","value","parseInt","entries","textAlign","marginTop"],"sources":["/home/quasar-dev/Downloads/frontend-test-luine/src/Pages/Step3.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Form, FormGroup, Label, Input, Col, Table } from 'reactstrap';\nimport { Button, Message } from 'semantic-ui-react';\n\ninterface Props {\n  category: string;\n  people: number;\n  setPage: (page: number) => void;\n  place: string;\n  selectedDishes: { [key: string]: number };\n  setSelectedDishes: (selectedDishes: { [key: string]: number }) => void;\n  options: { id: number; name: string; restaurant: string; availableMeals: string[] }[];\n}\n\nconst Step3: React.FC<Props> = (props) => {\n  const {\n    category,\n    people,\n    setPage,\n    place,\n    selectedDishes,\n    setSelectedDishes,\n    options,\n  } = props;\n\n  const [error, setError] = useState<string | null>(null);\n\n  const filteredOptions = options\n    .filter((option) => option.availableMeals.includes(category))\n    .filter((option) => option.restaurant === place)\n    .map((option) => option.name);\n\n  const [selectedDish, setSelectedDish] = useState('');\n  const [selectedQuantity, setSelectedQuantity] = useState(0);\n\n  const handleAddDish = () => {\n    if (!selectedDish || !selectedQuantity) {\n      return;\n    }\n    \n    const updatedDishes = {\n      ...selectedDishes,\n      [selectedDish]: selectedDish in selectedDishes ? selectedDishes[selectedDish] + selectedQuantity : selectedQuantity,\n    };\n    \n    setSelectedDishes(updatedDishes);\n    setSelectedDish('');\n    setSelectedQuantity(0);\n  };\n\n  const handleRemoveDish = (dish: string) => {\n    const updatedDishes = { ...selectedDishes };\n    delete updatedDishes[dish];\n    setSelectedDishes(updatedDishes);\n  };\n\n  const handleClickNext = () => {\n    let sum = 0;\n    for (const quantity of Object.values(selectedDishes)) {\n      sum += quantity;\n    }\n    \n    if (sum >= people && sum < 11) {\n      setError(null);\n      setPage(4);\n    } else {\n      setError('The total quantity should be greater or equal to the number of people (maximum of 10)');\n    }\n  };\n  \n  const handleClickOne = () => {\n    setError(null);\n    setPage(1);\n  };\n  \n  const handleClickTwo = () => {\n    setError(null);\n    setPage(2);\n  };\n\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n      <h1> </h1>\n      <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\n        <Button onClick={handleClickOne}>STEP 1</Button>\n        <Button onClick={handleClickTwo}>STEP 2</Button>\n        <Button disabled style={{ color: \"blue\" }} >STEP 3</Button>\n        <Button onClick={handleClickNext}>REVIEW</Button>\n      </div>\n      <h1> </h1>\n      <h2>Step 3</h2>\n      <p>Choose dishes and their quantities:</p>\n      <p>(The total being greater or equal to {people} and less than 11)</p>\n      {error && (\n        <p style={{ color: 'red' }}>\n          {error}\n        </p>\n      )}\n      <Form>\n        <FormGroup row>\n          <Label for=\"dish\" sm={2}>\n            Dish\n          </Label>\n          <Col sm={10}>\n            <Input\n              type=\"select\"\n              name=\"dish\"\n              id=\"dish\"\n              value={selectedDish}\n              onChange={(e) => setSelectedDish(e.target.value)}\n            >\n              <option value=\"\" disabled>\n                Select a dish\n              </option>\n              {filteredOptions.map((dish) => (\n                <option key={dish} value={dish}>\n                  {dish}\n                </option>\n              ))}\n            </Input>\n          </Col>\n        </FormGroup>\n        <FormGroup row>\n          <Label for=\"quantity\" sm={2}>\n            Quantity\n          </Label>\n          <Col sm={10}>\n            <Input\n              type=\"number\"\n              name=\"quantity\"\n              id=\"quantity\"\n              min=\"1\"\n              max=\"10\"\n              value={selectedQuantity}\n              onChange={(e) => setSelectedQuantity(parseInt(e.target.value))}\n            />\n          </Col>\n        </FormGroup>\n      </Form>\n      <div>\n        <button onClick={handleAddDish}>Add dish</button>\n      </div>\n      <br />\n      <Table>\n        <thead>\n          <tr>\n            <th>Dish</th>\n            <th>Quantity</th>\n            <th />\n          </tr>\n        </thead>\n        <tbody>\n          {Object.entries(selectedDishes).map(([dish, quantity]) => (\n            <tr key={dish}>\n              <td style={{ textAlign: \"center\"}}>{dish}</td>\n              <td style={{ textAlign: \"center\"}}>{quantity}</td>\n              <td>\n                <button onClick={() => handleRemoveDish(dish)}>Remove</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n      <h1> </h1>\n      <button onClick={handleClickTwo}>Previous</button>\n      <button onClick={handleClickNext}>Next</button>\n      {error && (\n        <Message\n          error\n          header='Error'\n          content={error}\n          style={{ marginTop: '1rem' }}\n        />\n      )}\n    </div>\n    );\n  };\n\nexport default Step3;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}